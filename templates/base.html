{% load django_bootstrap5 %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block css %}{% endblock css %}
    {% block title %}{% endblock title %}
    {% bootstrap_css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="{% static 'css/base.css' %}">
  </head>

  <body>
    <!-- 네비게이션바 -->
    <nav class="navbar navbar-expand-lg sticky-top" id="nabvar">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'labs:main' %}">
          <img src="{% static 'labs/img/mainlogo.png' %}" style="width: 44px; height:40px;" alt="">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{% url 'communities:index' %}">커뮤니티</a>
            </li>
            <li class="nav-item " id="navbarProduct">
              <a class="nav-link" href="{% url 'products:index' %}">제품</a>
            </li>
            <!-- 어드민만 보이는 회원목록 -->
            {% if request.user.is_superuser == 1 %}
              <li class="nav-item">
                <a class="nav-link" href="#">회원정보 목록</a>
              </li>
            {% endif %}
          </ul>

          <div class="d-flex">
          {% if request.user.is_authenticated %}
            <div class="navbar-nav d-flex align-items-center">
              <p class="nav-link mb-0 fw-bold">
                {% if request.user.image %}
                  <img src="#" alt="" style="width: 30px; height: 28px; border-radius: 500px">
                {% endif %}
                <a href="#" class="link-light">{{ request.user }}님 안녕하세요!</a>
              </p>
              <a class="nav-link" href="#">로그아웃</a>
              <a class="nav-link" href="">
                <i class="bi bi-cart"></i>
              </a>
            </div>
          {% else %}
            <div class="navbar-nav d-flex">
              <a class="nav-link" href="{% url 'accounts:signup' %}">회원가입</a>
              <a class="nav-link" href="{% url 'accounts:login' %}">로그인</a>
              <a class="nav-link" href="">
                <i class="bi bi-cart"></i>
              </a>
            </div>
          {% endif %}
          <form class="d-flex" action="#">
            <input style="width: 150px; border: 0.1rem solid #cdcdcd; border-radius: 5rem;" class="px-3" type="search" name="search" placeholder="검색" aria-label="Search" required="required">
            <button id="search-btn" class="border border-0 d-flex align-items-center">
              <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="click" style="width:32px;height:32px; background-color: transparent;" type="submit"></lord-icon>
            </button>
          </form>
        </div>
      </div>
      </div>
    </nav>
    <!-- 제품목록 -->
    <div class="black-bg" >
      <div class="white-bg" id="listGroup">
        <div><a href="{% url 'products:index' %}" class="navbar-product">전체</a></div>
        <div><a href="" class="navbar-product">삼성 (Samsung)</a></div>
        <div><a href="" class="navbar-product">엘지 (LG)</a></div>
        <div><a href="" class="navbar-product">애플 (Apple)</a></div>
        <div><a href="" class="navbar-product">레노버 (Lenovo)</a></div>
        <div><a href="" class="navbar-product">에이수스 (Asus)</a></div>
        <div><a href="" class="navbar-product">엠에스아이 (Msi)</a></div>
        <div><a href="" class="navbar-product">델 (Dell)</a></div>
        <div><a href="" class="navbar-product">한성 (Hansung)</a></div>
        <div><a href="" class="navbar-product">에이치피 (HP)</a></div>
      </div>
    </div>

    <!-- 타임특가정보 -->
    {% block timesale %}{% endblock timesale %}

    <!-- 캐러셀 -->
    {% block carousel %}{% endblock carousel %}

    <!-- 메인 내용 -->
    <main class="container">
      {% block content %}{% endblock content %}
    </main>

    <!-- 푸터1 -->
    <footer class="sticky-bottom my-5">
      <div class="card">
        <div class="card-body text-center">
          made by. 유영, 호빈, 성인, 윤식, 창현
        </div>
      </div>
    </footer>

    <!-- 푸터2 -->
    <!-- <footer>
      <div>아이콘 출처 :
        <a href="https://www.flaticon.com/kr/free-animated-icons/" title="컴퓨터 애니메이션 아이콘">컴퓨터 애니메이션 아이콘 제작자: Freepik - Flaticon</a>
      </div>
    </footer> -->

    <!-- 스크립트 -->
    {% bootstrap_javascript %}
    <script src="https://cdn.lordicon.com/qjzruarw.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      const navbarProductClick = document.querySelector('#navbarProduct')
      const listGroup = document.querySelector("#listGroup")
      const nabvar = document.querySelector("#nabvar")
      navbarProductClick.addEventListener('mouseenter', () => {
        document.querySelector('.black-bg').classList.add('show-modal')
      })

      listGroup.addEventListener('mouseleave', ()=>{
        document.querySelector('.black-bg').classList.remove('show-modal')
      })
      
      nabvar.addEventListener('mouseover', ()=>{
        document.querySelector('.navbar').style.backgroundColor = '#ffffff00'
        searchBtn.style.backgroundColor = '#ffffff00'
      })

      listGroup.addEventListener('mouseleave', ()=>{
        document.querySelector('.navbar').style.backgroundColor = 'transparent'
        searchBtn.style.backgroundColor = 'transparent'
      })
    </script>
    <script>
      const searchBtn = document.querySelector('#search-btn')

      window.addEventListener('scroll', () => {
            var 스크롤양 = document.querySelector('html').scrollTop;
            var 실제높이 = document.querySelector('html').scrollHeight;
            var 높이 = document.querySelector('html').clientHeight;
            if (window.scrollY > 200) {
                document.querySelector('.navbar').style.backgroundColor = '#ffffff00'
                document.querySelector('.navbar').style.transition = 'all 1s'
                searchBtn.style.backgroundColor = '#ffffff00'
                searchBtn.style.transition = 'all 1s'

            } else {
                document.querySelector('.navbar').style.backgroundColor = '#ffffff00'
                document.querySelector('.navbar').style.transition = 'all 1s'
                searchBtn.style.backgroundColor = '#ffffff00'
                searchBtn.style.transition = 'all 1s'
            }
        })

        
    </script>
    {% comment %} <script>
        document
            .querySelector("#modal")
            .addEventListener("click", () => {
                document
                    .querySelector(".modal")
                    .classList
                    .toggle("show");
            });
    </script> {% endcomment %}
    {% block js %}{% endblock js %}
</body>

</html>
